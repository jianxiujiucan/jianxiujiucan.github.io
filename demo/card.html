<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>卡片</title>
    <link rel="stylesheet" href="css/card.css" />
  </head>
  <body>
    <div class="wrapper">
      <div class="box box--front is-animation">
        <div class="card">
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
        </div>
        <div class="card">
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
        </div>
        <div class="card">
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
        </div>
      </div>
      <div class="box box--back is-animation">
        <div class="card">
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
        </div>
        <div class="card">
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
        </div>
        <div class="card">
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
          <div class="item"></div>
        </div>
      </div>
    </div>
    <script>
      const wrap = document.querySelector(".wrapper");
      const boxFront = document.querySelector(".box--front");
      const boxBack = document.querySelector(".box--back");
      const speedFactor = 1;
      let startX = 0;
      let curRotate = 0;

      setTimeout(() => {
        boxFront.classList.remove("is-animation");
        boxBack.classList.remove("is-animation");
        rotate()
      }, 6000);
      
      function rotate(){
        wrap.addEventListener("mousedown", (e) => {
        startX = e.screenX;
      });
      wrap.addEventListener("mousemove", (e) => {
        if (e.buttons === 1) {
          const diff = e.screenX - startX;
          startX = e.screenX;
          curRotate = curRotate + Math.floor(diff) * speedFactor;
          boxFront.style.transform = `rotateX(-10deg) rotateY(${curRotate}deg)`;
          boxBack.style.transform = `rotateX(-10deg) rotateY(${curRotate + 180}deg)`;
        }
      });
      }
    </script>
  </body>
</html>
